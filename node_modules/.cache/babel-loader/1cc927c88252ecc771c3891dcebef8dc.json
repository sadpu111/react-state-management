{"ast":null,"code":"import _objectDestructuringEmpty from\"/Users/kimwoohyuk/Desktop/Nomad Coders/react-master-class/crypto-tracker/node_modules/@babel/runtime/helpers/esm/objectDestructuringEmpty.js\";import _taggedTemplateLiteral from\"/Users/kimwoohyuk/Desktop/Nomad Coders/react-master-class/crypto-tracker/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js\";var _templateObject,_templateObject2,_templateObject3,_templateObject4,_templateObject5,_templateObject6,_templateObject7;import{useQuery}from\"react-query\";import{Link}from\"react-router-dom\";import styled from\"styled-components\";import{fetchCoins}from\"./Api\";import{Helmet}from\"react-helmet\";import{useSetRecoilState}from\"recoil\";import{isDarkAtom}from\"./atoms\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Loader=styled.span(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  text-align: center;\\n  display: block;\\n\"])));var Img=styled.img(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  width: 35px;\\n  height: 35px;\\n  margin-right:20px;\\n\"])));var Container=styled.div(_templateObject3||(_templateObject3=_taggedTemplateLiteral([\"\\n  padding: 0px 10px;\\n  max-width: 480px;\\n  margin: 0 auto;\\n\"])));var Header=styled.header(_templateObject4||(_templateObject4=_taggedTemplateLiteral([\"\\n  height: 10vp;\\n  display: flex;\\n  justify-content: center;\\n  align-items: center;\\n\"])));var CoinsList=styled.ul(_templateObject5||(_templateObject5=_taggedTemplateLiteral([\"\"])));var Coin=styled.li(_templateObject6||(_templateObject6=_taggedTemplateLiteral([\"\\n  background-color: \",\";\\n  color: \",\";\\n  margin-bottom: 10px;\\n  border-radius: 10px;\\n  border: 1px solid white;\\n  a { // Coin \\uCEF4\\uD3EC\\uB10C\\uD2B8 \\uB0B4\\uC758 anchor\\uB294 \\uC544\\uB798\\uC640 \\uAC19\\uC740 \\uC2A4\\uD0C0\\uC77C \\uC801\\uC6A9\\n    display: flex; \\n    align-items: center;\\n    transition: color 0.2s ease-in; // \\uC0C9\\uC774 \\uC804\\uD658(\\uBCC0\\uD654)\\uB418\\uB294\\uB370 0.2\\uCD08 \\uC9C0\\uC5F0 \\uBC0F ease-in \\uD6A8\\uACFC\\n    padding: 15px;\\n  }\\n  &:hover { // event \\uCD94\\uAC00\\uBB38\\uBC95.\\n    a {\\n      color: \",\";\\n    }\\n  }\\n\"])),function(props){return props.theme.cardBgColor;},function(props){return props.theme.textColor;},function(props){return props.theme.accentColor;});var Title=styled.h1(_templateObject7||(_templateObject7=_taggedTemplateLiteral([\"\\n  margin: 20px;\\n  color: \",\";\\n  font-size: 45px;\\n\"])),function(props){return props.theme.accentColor;});// typescript에 데이터의 shape을 알려주기 위한 interface.\n// coin 컴포넌트를 클릭하면 <Link>태그를 통해 {`/${coin.id}`}라는 주소로 이동 -> Routers.tsx의 Router 컴포넌트에서 /:coinId 경로는 Coin.tsx의 Coin 컴포넌트를 랜더링하는 것으로 정의. 정리하면, Coin.tsx의 Coin 컴포넌트의 coinId와 Router.tsx의 Router 컴포넌트의 coinId는 useParams()로 연결되어있고, 이 coinId 자리에 Coins.tsx의 coin array의 id값을 전달하는 것.\nfunction Coins(_ref){_objectDestructuringEmpty(_ref);var setDarkAtom=useSetRecoilState(isDarkAtom);var toggleDarkAtom=function toggleDarkAtom(){return setDarkAtom(function(value){return!value;});};var _useQuery=useQuery([\"allCoins\"],fetchCoins),isLoading=_useQuery.isLoading,data=_useQuery.data;// useQuery를 통해 fetcher함수(여기서는 fetchCoins)를 전달인자로 받아 실행하는데, isLoading으로 읽어오는 중인지 여부를 판단하고, 로딩이 끝나면 해당 데이터(json)을 data로 받아온다. 얘도 마찬가지로 typescript에 데이터의 타입을 전달하기 위해 ICoin이라는 interface 적용. react qeury는 cahce에 로딩된 데이터를 저장하여 한번 로딩하면 저장했던 cache애서 바로 불러온다.\nreturn/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Crypto Currency\"})}),/*#__PURE__*/_jsxs(Header,{children:[/*#__PURE__*/_jsx(Title,{children:\"Crypto Currency\"}),/*#__PURE__*/_jsx(\"button\",{onClick:toggleDarkAtom,children:\" Toggle mode\"})]}),isLoading?/*#__PURE__*/_jsx(Loader,{children:\"Loading...\"}):/*#__PURE__*/_jsx(CoinsList,{children:data===null||data===void 0?void 0:data.slice(0,100).map(function(coin){return/*#__PURE__*/_jsx(Coin,{children:/*#__PURE__*/_jsxs(Link,{to:\"/\".concat(coin.id,\"/chart\"),state:coin,children:[/*#__PURE__*/_jsx(Img,{src:\"https://coinicons-api.vercel.app/api/icon/\".concat(coin.symbol.toLowerCase())}),coin.name,\" \\u2192\"]})},coin.id);})})]});}// <Link state={} /> => 브라우저가 이미 갖고 있는 데이터를 다른 화면으로 전달. 이를 통해 api를 읽는 시간동안 화면에 전달받은 데이터를 표시할 수 있다. 로딩화면 생략 가능.\nexport default Coins;","map":{"version":3,"names":["useQuery","Link","styled","fetchCoins","Helmet","useSetRecoilState","isDarkAtom","Loader","span","Img","img","Container","div","Header","header","CoinsList","ul","Coin","li","props","theme","cardBgColor","textColor","accentColor","Title","h1","Coins","setDarkAtom","toggleDarkAtom","value","isLoading","data","slice","map","coin","id","symbol","toLowerCase","name"],"sources":["/Users/kimwoohyuk/Desktop/Nomad Coders/react-master-class/crypto-tracker/src/routes/Coins.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useQuery } from \"react-query\";\nimport { Link } from \"react-router-dom\";\nimport styled from \"styled-components\"\nimport { fetchCoins } from \"./Api\";\nimport { Helmet } from \"react-helmet\";\nimport { useSetRecoilState } from \"recoil\";\nimport { isDarkAtom } from \"./atoms\";\n\ninterface ICoinsProps {\n}\n\nconst Loader = styled.span`\n  text-align: center;\n  display: block;\n`;\n\nconst Img = styled.img`\n  width: 35px;\n  height: 35px;\n  margin-right:20px;\n`;\n\nconst Container = styled.div`\n  padding: 0px 10px;\n  max-width: 480px;\n  margin: 0 auto;\n`;\n\nconst Header = styled.header`\n  height: 10vp;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst CoinsList = styled.ul``;\n\nconst Coin = styled.li`\n  background-color: ${props => props.theme.cardBgColor};\n  color: ${(props) => props.theme.textColor};\n  margin-bottom: 10px;\n  border-radius: 10px;\n  border: 1px solid white;\n  a { // Coin 컴포넌트 내의 anchor는 아래와 같은 스타일 적용\n    display: flex; \n    align-items: center;\n    transition: color 0.2s ease-in; // 색이 전환(변화)되는데 0.2초 지연 및 ease-in 효과\n    padding: 15px;\n  }\n  &:hover { // event 추가문법.\n    a {\n      color: ${(props) => props.theme.accentColor};\n    }\n  }\n`;\n\nconst Title = styled.h1`\n  margin: 20px;\n  color: ${(props) => props.theme.accentColor};\n  font-size: 45px;\n`\n// typescript에 데이터의 shape을 알려주기 위한 interface.\ninterface ICoin {\n  id: string;\n  name: string;\n  symbol: string;\n  rank: number;\n  is_new: boolean;\n  is_active: boolean;\n  type: string;\n}\n\n\n// coin 컴포넌트를 클릭하면 <Link>태그를 통해 {`/${coin.id}`}라는 주소로 이동 -> Routers.tsx의 Router 컴포넌트에서 /:coinId 경로는 Coin.tsx의 Coin 컴포넌트를 랜더링하는 것으로 정의. 정리하면, Coin.tsx의 Coin 컴포넌트의 coinId와 Router.tsx의 Router 컴포넌트의 coinId는 useParams()로 연결되어있고, 이 coinId 자리에 Coins.tsx의 coin array의 id값을 전달하는 것.\nfunction Coins({}: ICoinsProps ) {\n  const setDarkAtom = useSetRecoilState(isDarkAtom);\n  const toggleDarkAtom = () => setDarkAtom((value) => !value)\n  const { isLoading, data } = useQuery<ICoin[]>([\"allCoins\"], fetchCoins); // useQuery를 통해 fetcher함수(여기서는 fetchCoins)를 전달인자로 받아 실행하는데, isLoading으로 읽어오는 중인지 여부를 판단하고, 로딩이 끝나면 해당 데이터(json)을 data로 받아온다. 얘도 마찬가지로 typescript에 데이터의 타입을 전달하기 위해 ICoin이라는 interface 적용. react qeury는 cahce에 로딩된 데이터를 저장하여 한번 로딩하면 저장했던 cache애서 바로 불러온다.\n  return (\n    <Container>\n      <Helmet>\n        <title>Crypto Currency</title>\n      </Helmet>\n      <Header>\n        <Title>Crypto Currency</Title>\n        <button onClick={toggleDarkAtom}> Toggle mode</button>\n       </Header>\n      {isLoading ? <Loader>Loading...</Loader> :\n        <CoinsList>\n          {data?.slice(0, 100).map((coin) => (\n            <Coin key={coin.id}>\n              <Link to={`/${coin.id}/chart`} state={coin}>\n                <Img src={`https://coinicons-api.vercel.app/api/icon/${coin.symbol.toLowerCase()}`}></Img>\n                {coin.name} &rarr;</Link>\n            </Coin>))}\n        </CoinsList>}\n    </Container>\n  )\n}\n// <Link state={} /> => 브라우저가 이미 갖고 있는 데이터를 다른 화면으로 전달. 이를 통해 api를 읽는 시간동안 화면에 전달받은 데이터를 표시할 수 있다. 로딩화면 생략 가능.\n\nexport default Coins"],"mappings":"4dACA,OAASA,QAAT,KAAyB,aAAzB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,OAAP,KAAmB,mBAAnB,CACA,OAASC,UAAT,KAA2B,OAA3B,CACA,OAASC,MAAT,KAAuB,cAAvB,CACA,OAASC,iBAAT,KAAkC,QAAlC,CACA,OAASC,UAAT,KAA2B,SAA3B,C,wFAKA,GAAMC,OAAM,CAAGL,MAAM,CAACM,IAAV,6GAAZ,CAKA,GAAMC,IAAG,CAAGP,MAAM,CAACQ,GAAV,4HAAT,CAMA,GAAMC,UAAS,CAAGT,MAAM,CAACU,GAAV,mIAAf,CAMA,GAAMC,OAAM,CAAGX,MAAM,CAACY,MAAV,4JAAZ,CAOA,GAAMC,UAAS,CAAGb,MAAM,CAACc,EAAV,mEAAf,CAEA,GAAMC,KAAI,CAAGf,MAAM,CAACgB,EAAV,inBACY,SAAAC,KAAK,QAAIA,MAAK,CAACC,KAAN,CAAYC,WAAhB,EADjB,CAEC,SAACF,KAAD,QAAWA,MAAK,CAACC,KAAN,CAAYE,SAAvB,EAFD,CAcK,SAACH,KAAD,QAAWA,MAAK,CAACC,KAAN,CAAYG,WAAvB,EAdL,CAAV,CAmBA,GAAMC,MAAK,CAAGtB,MAAM,CAACuB,EAAV,yHAEA,SAACN,KAAD,QAAWA,MAAK,CAACC,KAAN,CAAYG,WAAvB,EAFA,CAAX,CAKA;AAYA;AACA,QAASG,MAAT,MAAiC,iCAC/B,GAAMC,YAAW,CAAGtB,iBAAiB,CAACC,UAAD,CAArC,CACA,GAAMsB,eAAc,CAAG,QAAjBA,eAAiB,SAAMD,YAAW,CAAC,SAACE,KAAD,QAAW,CAACA,KAAZ,EAAD,CAAjB,EAAvB,CACA,cAA4B7B,QAAQ,CAAU,CAAC,UAAD,CAAV,CAAwBG,UAAxB,CAApC,CAAQ2B,SAAR,WAAQA,SAAR,CAAmBC,IAAnB,WAAmBA,IAAnB,CAAyE;AACzE,mBACE,MAAC,SAAD,yBACE,KAAC,MAAD,wBACE,0CADF,EADF,cAIE,MAAC,MAAD,yBACE,KAAC,KAAD,8BADF,cAEE,eAAQ,OAAO,CAAEH,cAAjB,0BAFF,GAJF,CAQGE,SAAS,cAAG,KAAC,MAAD,yBAAH,cACR,KAAC,SAAD,WACGC,IADH,SACGA,IADH,iBACGA,IAAI,CAAEC,KAAN,CAAY,CAAZ,CAAe,GAAf,EAAoBC,GAApB,CAAwB,SAACC,IAAD,qBACvB,KAAC,IAAD,wBACE,MAAC,IAAD,EAAM,EAAE,YAAMA,IAAI,CAACC,EAAX,UAAR,CAA+B,KAAK,CAAED,IAAtC,wBACE,KAAC,GAAD,EAAK,GAAG,qDAA+CA,IAAI,CAACE,MAAL,CAAYC,WAAZ,EAA/C,CAAR,EADF,CAEGH,IAAI,CAACI,IAFR,aADF,EAAWJ,IAAI,CAACC,EAAhB,CADuB,EAAxB,CADH,EATJ,GADF,CAoBD,CACD;AAEA,cAAeT,MAAf"},"metadata":{},"sourceType":"module"}